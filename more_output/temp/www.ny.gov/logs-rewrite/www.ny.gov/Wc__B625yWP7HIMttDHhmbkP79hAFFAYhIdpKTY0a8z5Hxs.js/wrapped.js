/* Source and licensing information for the line(s) below can be found at https://www.ny.gov/sites/all/themes/ny_gov/layouts/ny-gov/assets/ny-gov-universal_searcher.js. */
(function __HORCRUX__(){ (function($){var jQuery=$;$.fn.nygovUniversalSearcher=function(){return this.each(function(){var result_sets=[],servicePath='',$asSite=window.NY.HOST?'as_sitesearch='+window.location.hostname:'',$searcher=$(this),$input=$searcher.find('.nygov-universal_searcher-input'),$form=$input.parent('form'),$results=$('#nygov-universal_searcher-results'),$more=$('#nygov-universal_searcher-more'),searchItsUrl='http://search.its.ny.gov/search?'+$asSite+'&btnG=Search&client=default_frontend&output=xml_no_dtd&proxystylesheet=default_frontend&ulang=en&sort=date%3AD%3AL%3Ad1&entqr=3&entqrm=0&wc=200&wc_mc=1&oe=UTF-8&ie=UTF-8&ud=1&site=default_collection&q=';$form.submit(function(){window.location.href=searchItsUrl+$input.val();return false});$searcher.find('.nygov-universal_searcher-clear').click(function(e){e.preventDefault();$input.val('');$results.html('');$more.html('');return false});if(window.NY.HOST){servicePath='//'+window.NY.HOST+'/services/nygov/autocomplete'}else if(typeof window.Drupal!=='undefined'&&window.Drupal.settings.nygov_solr_core){servicePath=window.Drupal.settings.nygov_solr_core.universal_searcher.service_path}else servicePath='/services/nygov/autocomplete';$input.autocomplete({source:function(request,response){$.ajax({url:servicePath,dataType:"jsonp",data:{keywords:request.term},success:function(data){result_sets=data;var suggestions={internal:[],external:[]};if(data.data!=window.undefined)for(var d=0;d<data.data.length;d++){var item=data.data[d],regex=new RegExp(request.term,"i"),match=item.keywords.match(regex),term=item.keywords.replace(regex,'<em>'+match[0]+'</em>');if(item.items.length>0){suggestions.internal.push('<span class="results-yes">'+term+'</span>')}else suggestions.external.push('<span class="results-no">'+term+'</span>')};response(suggestions.internal.concat(suggestions.external))}})},create:function(){$(this).data('ui-autocomplete')._renderItem=function(ul,item){return $("<li>").append("<a>"+item.label+"</a>").appendTo(ul)}},minLength:3,select:function(event,ui){$(".ui-menu-item").hide();setSelected(ui.item.value)},appendTo:'#nygov-autocomplete-results',response:function(event,ui){$(window.document).trigger('nygov.response');if(ui.content.length>0)for(var u=0;u<ui.content.length;u++){var item=ui.content[u];item.value=$('<div>'+item.value+'</div>').text();ui.content[u]=item}},search:function(){$(window.document).trigger('nygov.search')}});$input.keypress(function(e){if(e.which==13)if(result_sets.data!=window.undefined&&result_sets.data.length>0){var first=result_sets.data[0];if(first.items!=window.undefined&&first.items.length>0){$input.data('ui-autocomplete')._trigger('select','autocompleteselect',{item:{value:first.keywords}});return false}}})
function setSelected(value){$results.html('');if(result_sets.data!=window.undefined)for(var d=0;d<result_sets.data.length;d++){var item=result_sets.data[d];if(item.keywords==value&&item.items.length>0){for(var i=0;i<item.items.length;i++){var result=item.items[i];$results.append(result.markup)};break}};var query=window.encodeURI(value);if($results.children().length==0){window.location.href=searchItsUrl+query}else{$more.html('<a href="'+searchItsUrl+query+'">Get More Results Â»</a>');$(window.document).trigger('selectAutoCompleteResult')}}})};$(window.document).ready(function(){$('.nygov-universal_searcher').nygovUniversalSearcher()})})(window.$182);;
/* Source and licensing information for the above line(s) can be found at https://www.ny.gov/sites/all/themes/ny_gov/layouts/ny-gov/assets/ny-gov-universal_searcher.js. */
/* Source and licensing information for the line(s) below can be found at https://www.ny.gov/sites/all/themes/ny_gov/layouts/ny-gov/assets/ny-gov.js. */
(function($){$(function(){window.NY.GLOBAL.init()})})(window.$182);; })();
/* Source and licensing information for the above line(s) can be found at https://www.ny.gov/sites/all/themes/ny_gov/layouts/ny-gov/assets/ny-gov.js. */
