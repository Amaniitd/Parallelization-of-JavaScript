/home/aman/Desktop/Parallelization-of-JavaScript/horcrux-instrumentation-rewriter/node_modules/falafel/index.js
Options are {"useProxy":true,"caching":false,"include_prefix":false,"path":"ks/ads_core_hooks_use-load-ivt-8777800673e02d96.js","origPath":"/dfw/63fd9f59-d6bf/49c2ec22-3192-4487-b5a6-ea6a3f7eb24b/v2/en-US/_next/static/chunks/ads_core_hooks_use-load-ivt-8777800673e02d96.js","e2eTesting":false,"pageLoaded":"false;","invocation_limit":"5000;","pattern":"record","proxyName":"__tracerPROXY"}
{
  useProxy: true,
  caching: false,
  include_prefix: false,
  path: 'ks/ads_core_hooks_use-load-ivt-8777800673e02d96.js',
  origPath: '/dfw/63fd9f59-d6bf/49c2ec22-3192-4487-b5a6-ea6a3f7eb24b/v2/en-US/_next/static/chunks/ads_core_hooks_use-load-ivt-8777800673e02d96.js',
  e2eTesting: false,
  pageLoaded: 'false;',
  invocation_limit: '5000;',
  pattern: 'record',
  proxyName: '__tracerPROXY',
  cg: [
    'US/_next/static/chunks/webpack-4d33f682e4bee2c8.js-function-1-1-1-72748',
    '/chunks/ads_ui_btf_ads-btf-cmp.2160c073080b3946.js-function-1-1-1-47909',
    'lib_utils_listenForPostMessage.26819f6fde1c8129.js-function-1-1-1-32818',
    'ks/ads_core_hooks_use-load-ivt-8777800673e02d96.js-function-1-1-1-18993',
    'ore_components_feature-wrapper-fc02aab9149a9f60.js-function-1-1-1-21499',
    'uction_20221221T182841134Z-en-US/_buildManifest.js-function-1-1-1-28166',
    '/_next/static/chunks/framework-a29671b22cd7f2e1.js-function-1-1-1-143926',
    'nks/ads_provider_utils_ad-util-42ce30f24acc6b2f.js-function-1-1-1-24046',
    '/akam/13/2ca6b89e-function-2-7949-2-7999',
    '/px/PXu6b0qd2S/init.js-function-2-9269-2-9296',
    'obal-nav_footer_cookie-checker.65075abf78263646.js-function-1-1-1-1160',
    'www.walmart.com/-script-38-function-1-118965-1-120085',
    'www.walmart.com/-script-0-function-1-2148-1-2597',
    '/akam/13/2ca6b89e-function-2-1069-2-1180',
    'tic/chunks/ads_core_fire-pixel.ea8353e924c1991d.js-function-1-1-1-1756',
    '/px/PXu6b0qd2S/init.js-function-2-28803-2-28960',
    '/ui_hero-pov_components_mobile.da9296253cdf83ca.js-function-1-1-1-8183',
    '_hooks_use-is-tracking-enabled-ce90d61f45ce12ec.js-function-1-1-1-10025',
    '/px/PXu6b0qd2S/init.js-function-2-29251-2-29276',
    '/sw-register.js-function-1-4002-1-7330',
    's/ads_ui_btf_brand-box-wrapper-bed633793cb36fb9.js-function-1-1-1-18117',
    '/akam/13/2ca6b89e-function-1-1-2-12431',
    'www.walmart.com/-script-38-function-1-120096-1-120540',
    'd-components_CardV2_CardItemV2-65914919627f78d0.js-function-1-1-1-12455',
    '/a14/capabilities.min.js-function-1-3348-1-3372',
    'tatic/chunks/ui_calloutWrapper.b8230e018592ed29.js-function-1-1-1-306',
    '_next/static/chunks/ads_ui_btf.bcb1b5b0ba50a251.js-function-1-1-1-11984',
    'www.walmart.com/-script-0-function-1-1612-1-3258',
    '/sw-register.js-function-1-1-1-7496',
    '_next/static/chunks/pages/_app-2e66789b1f4731dd.js-function-1-1-1-588775',
    '.2_node_modules_debounce_index-2405d2e97fffdb3f.js-function-1-1-1-8308',
    'next/static/chunks/pages/index-a9f433b0d1cd67f7.js-function-1-1-1-69826',
    '/akam/13/2ca6b89e-function-2-8070-2-8103',
    '/a14/capabilities.min.js-function-1-3840-1-3863',
    '/akam/13/2ca6b89e-function-2-7820-2-7940',
    'oduction_20221221T182841134Z-en-US/_ssgManifest.js-function-1-1-1-132',
    '/px/PXu6b0qd2S/init.js-function-2-1-8-15589',
    'ds_core_components_lazy-render.bcc6f21aca8e3799.js-function-1-1-1-10609',
    '/a14/capabilities.min.js-function-1-3101-1-3136',
    'ntity-stepper_quantity-stepper-b714a82a52f5b22a.js-function-1-1-1-7805',
    '/a14/capabilities.min.js-function-1-1-1-4862',
    '/px/PXu6b0qd2S/init.js-function-8-14206-8-14678',
    'www.walmart.com/-script-0-function-1-2597-1-3025',
    'ads_core_hooks_get-ads-context-8737b2adfa67fccf.js-function-1-1-1-39747',
    '=beacon.walmart.com&bh=beacon.lightest.walmart.com-function-1-2-1-2601',
    'l-scroller_horizontal-scroller-43bc1937d6d7c3f7.js-function-1-1-1-18043',
    '/akam/13/2ca6b89e-function-2-1297-2-1371',
    '_provider_ads-context-provider-7159c3f8f216a02e.js-function-1-1-1-8243',
    '/px/PXu6b0qd2S/init.js-function-4-4876-4-4922',
    '/px/PXu6b0qd2S/init.js-function-4-4932-4-5123',
    '/sw-register.js-function-1-6564-1-6669',
    's/cart_add-to-cart_add-to-cart-8ca166d479a04434.js-function-1-1-1-14564',
    'almart_use-safeframe_lib_index-73db399cc238d48a.js-function-1-1-1-12901'
  ]
}
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[84117],{549182:function(t,e,i){i.d(e,{b:function(){return c}});var a,o,n=i(833114),s=i(145293),r=i(752406);const l=null==(a=(0,s.default)())||null==(o=a.publicRuntimeConfig)?void 0:o.moatIvt;function c(){const t=(0,n.yh)(),{0:e,1:i}=(0,r.useState)(!1);return(0,r.useEffect)((()=>{t(l).then((()=>{i(!0)}))}),[t]),e}},705446:function(t,e,i){i.d(e,{H:function(){return l}});var a=i(220934),o=i(752406),n=i(442794),s=i(379972),r=i(851736);function l(t){const e=(0,o.useMemo)((()=>a.Y2.uuids().includes(t.uuId)),[t.uuId]),i=(0,o.useMemo)((()=>"gallery3"===t.metaData.dfpParams.targeting.location),[t.metaData.dfpParams.targeting.location]),l=(0,s.v)().enableGalleryReRender&&i,c=(0,o.useMemo)((()=>(0,n.U2)("wm_client_ip")),[]),d=(0,o.useMemo)((()=>(0,n.U2)("wmlh")),[]);return(0,r.F)((()=>{a.Y2.rendered(t)})),(0,o.useMemo)((()=>{const i=c===t.metaData.dfpParams.clientIp||d===t.metaData.dfpParams.wmlh;return(0,s.v)().displayCheckIp&&!i?"ip-mismatch":!(!(0,s.v)().displayPreviousRenderCheck||!e||l)&&"dup-render"}),[c,t.metaData.dfpParams.clientIp,d,t.metaData.dfpParams.wmlh,e,l])}},565239:function(t,e,i){i.d(e,{a:function(){return a}});const a=()=>{let t,e;return"undefined"!==typeof window.innerWidth?(t=window.innerWidth,e=window.innerHeight):"undefined"!==typeof document.documentElement&&"undefined"!==typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):(t=document.getElementsByTagName("body")[0].clientWidth,e=document.getElementsByTagName("body")[0].clientHeight),[t,e]}},359606:function(t,e,i){i.d(e,{r:function(){return Tt}});var a=i(379972),o=i(82318),n=i(311877),s=i(752406);var r=t=>t?(t.forEach((t=>{clearTimeout(t)})),[]):[],l=i(382301),c=i.n(l);const d="viewabilityMRCTimeout";let u,m,T,f,h,g;!function(t){t.moat="moat",t.ias="ias",t.doubleverify="doubleverify"}(u||(u={})),function(t){t.AD_IMPRESSION="AD_IMPRESSION",t.CLICK="CLICK",t.TOUCH="TOUCH",t.MRC_VIEWABLE="MRC_VIEWABLE",t.UNLOAD="UNLOAD"}(m||(m={})),function(t){t.FULL_VIEWABLE="FULL_VIEWABLE",t.INVIEW_50_5s="INVIEW_50_5s",t.INVIEW_50_15s="INVIEW_50_15s"}(T||(T={})),function(t){t.GROUPM_VIEWABLE="GROUPM_VIEWABLE",t.PERIODIC_UPDATE="AD_STATUS"}(f||(f={})),function(t){t.AD_IMPRESSION="adImpression",t.AD_VIEWABLE="adViewable",t.AD_TOUCH="adTouch",t.AD_CLICK="adClick",t.AD_REMOVE="adRemove"}(h||(h={})),function(t){t.AD_VIEWABLE_GM="adViewableGm",t.AD_STATUS="adStatus"}(g||(g={}));const I=.5,p=t=>t.povMrcFix?1:.999,w=1e3;var y=(t,e)=>{let i=!1;return function(){for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];i||(i=!0,setTimeout((()=>{t(...o),i=!1}),e))}};var v=t=>function(){let e=[];const i=y((()=>{for(let i=0;i<e.length;i++)try{e[i]()}catch(t){0}}),t),a=!0;if(a){for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];n.forEach((t=>{document.addEventListener(t,i)}))}return t=>(e.push(t),()=>{e=e.filter((e=>e!==t))})};var b=v(10)("visibilitychange");const C=(t,e)=>{let i=!1;const a=t.trackingState,o=t.commonTrackingTimeoutList.viewabilityMRCTimeout;o.length&&(t.commonTrackingTimeoutList.viewabilityMRCTimeout=r(o)),a.viewabilityMRC||(a.viewabilityMRC=!0,i=!0,t.beaconUtil.fire(m.MRC_VIEWABLE,h.AD_VIEWABLE)),i&&e(u.moat,a,"viewabilityMRC")};var V=(t,e,i)=>{const a=e.commonTrackingTimeoutList.viewabilityMRCTimeout;t.intersectionRatio>=I?a.push(window.setTimeout(C,w,e,i)):e.commonTrackingTimeoutList.viewabilityMRCTimeout=r(a)};var E=i(565239),P=i(144295);function L(){return"function"===typeof window.f?window.f():{}}var A=i(506452),M=i(145293);const k="iasTeamId",S=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),t.windowNotVisibleTime)return t.windowNotVisibleTime-e;const a=Date.now();let o=i;return o=a-e+o,t.windowVisibleTimes.forEach((t=>{if(t.notVisible&&t.visible&&t.notVisible>e){const e=t.visible-t.notVisible;o-=e}})),o},_=function(t,e){void 0===e&&(e=0);const i=t.windowNotVisibleTime||Date.now();let a=i-e;const o=t.windowVisibleTimes.length,n=t.windowVisibleTimes[o-1]&&t.windowVisibleTimes[o-1].visible;return n&&e<n?i-n:(t.windowVisibleTimes.forEach((t=>{if(t.notVisible&&t.visible&&t.notVisible>e){const e=t.visible-t.notVisible;a-=e}})),a)},D=(t,e,i,a,o)=>{for(let n=0;n<t.length;n++){const s=t[n]-a/1e3;if(s>=0){e.trackingTimeoutList[i].push(setTimeout(o,1e3*s))}}},O=(t,e,i,a)=>{const o=S(t,e,i);return e?o:i||a},R=(t,e,i,a)=>{const o=_(t,e);return e&&o>i?o:i||a},U="viewabilityMRCStatusTimeout",F="viewabilityFiftyCumulativeTimeout",W="groupMViewableTimeout",B="publicisFullInViewOTSTimeout",N="WALMART_DISPLAY_S2S1",H="WALMART_DISPLAY_S2SQA1",z=[5,10,15,30,60,120,180],G={[f.PERIODIC_UPDATE]:-1,[m.AD_IMPRESSION]:0,[m.CLICK]:2,[m.MRC_VIEWABLE]:5,[f.GROUPM_VIEWABLE]:9,[m.UNLOAD]:21,[m.TOUCH]:23},K={[f.PERIODIC_UPDATE]:-1,[m.AD_IMPRESSION]:0,[m.UNLOAD]:1,[m.CLICK]:2,[m.TOUCH]:3,[m.MRC_VIEWABLE]:4,[f.GROUPM_VIEWABLE]:5,[T.INVIEW_50_5s]:6,[T.INVIEW_50_15s]:7,[T.FULL_VIEWABLE]:8};var x=(t,e,i)=>{const o=Date.now(),n=t.trackingState;n.eventTypeCount[e]++;const s=Number(t.element.offsetHeight),r=Number(t.element.offsetWidth),[l,c]=(0,E.a)(),d=o-n.adLoadedTime,u=n.adLoadedTime,T=o,f=O(t,t.startMrcViewTime,n.totalMrcViewTime,0),h=O(t,t.startFullInViewOTS,n.fullInViewOTS,0),g=R(t,t.startFiftyPctContTime,n.totalFiftyPctContTime,0),I=R(t,t.startHundredPctContTime,n.totalHundredPctContTime,0),{adIds:p,adLocation:w,assetUrl:y,dfpTag:v,pageType:b,random:C,adUnitId:V,categoryId:S}=t.getAdCustomInfo(),_=(0,P.S)(),D=null!=V?V:"0",U=null!=S?S:"0",F=(0,M.default)(),W=(0,a.v)().enableGetPvId?(0,A.W)():"",B={moatId:"production"===F.publicRuntimeConfig.profile?N:H,ev:K[e],ivTime50:f,adUrl:y,adIds:p,pubUrl:window.location.href,fullUrl:window.location.href,ivc50:g,ivTime100:h,h:s,ivc100:I,ts:T,sessId:C,sh:c,sw:l,reqTs:u,loadTime:d,count:n.eventTypeCount[e]-1,w:r,measurable:!0,fullIvMeasurable:!0,zMoatAdLocation:w,zMoatAdUnit1:v,zMoatAdUnit2:b,zMoatAdUnitId:D,zMoatCategoryId:U,zMoatXpa:_,zMoatImpId:C,zMoatPageId:W,zMoatImpTs:u,[k]:(null==i?void 0:i.iasTeamId)||"",moatIvt:L()},z=function(t,e,i){void 0===i&&(i=1),e&&(B[t]=i)};return z("groupView",n.groupMViewable),z("fvOts",n.groupMViewable),z("viewable",n.viewabilityMRC),z("pubivots",n.publicisFullInViewOTS),z("clickOffset",Boolean(t.touchOrClickTimeOffset)),z("clickCount",e===m.CLICK,n.eventTypeCount[e]),{payload:B}};const q=(t,e,i,a)=>{const o=S(t,e,i);return e?o:i||a},Y=(t,e,i,a)=>{const o=_(t,e);return e&&o>i?o:i||a};var j=(t,e)=>{const i=Date.now(),o=t.trackingState;o.eventTypeCount[e]++;const n=Number(t.element.offsetHeight),s=Number(t.element.offsetWidth),[r,l]=(0,E.a)(),c=i-o.adLoadedTime,d=o.adLoadedTime,u=q(t,t.startMrcViewTime,o.totalMrcViewTime,0),T=q(t,t.startFullInViewOTS,o.fullInViewOTS,0),f=Y(t,t.startFiftyPctContTime,o.totalFiftyPctContTime,0),h=Y(t,t.startHundredPctContTime,o.totalHundredPctContTime,0),{adIds:g,adLocation:I,assetUrl:p,dfpTag:w,pageType:y,random:v,adUnitId:b,categoryId:C}=t.getAdCustomInfo(),V=(0,P.S)(),k=null!=b?b:"0",S=null!=C?C:"0",_=(0,M.default)(),D=(0,a.v)().enableGetPvId?(0,A.W)():"",O={ac:1,bq:0,fr:1,i:"production"===_.publicRuntimeConfig.profile?N:H,sl:1,e:G[e],ag:u,ak:p,d:g,gu:window.location.href,ia:f,gh:1,gf:T,h:n,ic:h,fq:1,de:v,qb:l,qa:r,t:d,m:c,q:o.eventTypeCount[e]-1,w:s,zMoatAdLocation:I,zMoatAdUnit1:w,zMoatAdUnit2:y,zMoatAdUnitId:k,zMoatCategoryId:S,zMoatXpa:V,zMoatImpId:v,zMoatPageId:D,zMoatImpTs:d,...L()},R=function(t,e,i){void 0===i&&(i=1),e&&(O[t]=i)};return R("in",o.groupMViewable),R("gi",o.groupMViewable),R("as",o.viewabilityMRC),R("pd",o.publicisFullInViewOTS),R("c",t.touchOrClickTimeOffset,t.touchOrClickTimeOffset),R("tc",e===m.CLICK,o.eventTypeCount[e]),{payload:O}};var X=(t,e,i)=>{let a=!1;const o=e.trackingState,n=Date.now();if(o.totalFiftyPctContTime||(o.totalFiftyPctContTime=0),t.intersectionRatio>=I)e.startFiftyPctContTime||(e.startFiftyPctContTime=n);else if(e.startFiftyPctContTime){const t=_(e,e.startFiftyPctContTime);(!o.totalFiftyPctContTime||t>o.totalFiftyPctContTime)&&(o.totalFiftyPctContTime=t,a=!0),e.startFiftyPctContTime=0}else e.startFiftyPctContTime=0;a&&i(u.moat,o,"totalFiftyPctContTime")};var Q=(t,e,i)=>{let a=!1;const o=e.trackingState;t.intersectionRatio>=e.getFullViewPercentage()?e.startFullInViewOTS||(e.startFullInViewOTS=Date.now()):e.startFullInViewOTS?(o.fullInViewOTS=S(e,e.startFullInViewOTS,o.fullInViewOTS),a=!0,e.groupMTotalPeriodicTime=Date.now()-e.startFullInViewOTS+e.groupMTotalPeriodicTime,e.startFullInViewOTS=0):e.startFullInViewOTS=0,a&&i(u.moat,o,"fullInViewOTS")};const Z=(t,e)=>{let i=!1;const a=t.trackingState,o=t.trackingTimeoutList.groupMViewableTimeout;o.length&&(t.trackingTimeoutList.groupMViewableTimeout=r(o)),a.groupMViewable||(a.groupMViewable=!0,i=!0,t.beaconUtil.fire(f.GROUPM_VIEWABLE,g.AD_VIEWABLE_GM)),i&&e(u.moat,a,"groupMViewable"),D(z,t,W,t.groupMTotalPeriodicTime,(()=>{t.beaconUtil.fire(f.GROUPM_VIEWABLE,g.AD_STATUS)}))};var J=(t,e,i)=>{const a=e.trackingState.isAdLarge?I:e.getFullViewPercentage(),o=e.trackingTimeoutList.groupMViewableTimeout;t.intersectionRatio>=a?o.push(window.setTimeout(Z,w,e,i)):e.trackingTimeoutList.groupMViewableTimeout=r(o)};var $=(t,e,i)=>{let a=!1;const o=e.trackingState,n=Date.now();if(e.startHundredPctContTime||(e.startHundredPctContTime=0),t.intersectionRatio>=e.getFullViewPercentage())e.startHundredPctContTime||(e.startHundredPctContTime=n);else if(e.startHundredPctContTime){const t=_(e,e.startHundredPctContTime);(!o.totalHundredPctContTime||t>o.totalHundredPctContTime)&&(o.totalHundredPctContTime=t,a=!0),e.startHundredPctContTime=0}else e.startHundredPctContTime=0;a&&i(u.moat,o,"totalHundredPctContTime")};var tt=(t,e)=>{e.lastObservedEntry=t};const et=(t,e)=>{const i=t.trackingState,a=t.trackingTimeoutList.publicisFullInViewOTSTimeout;a.length&&(t.trackingTimeoutList.publicisFullInViewOTSTimeout=r(a)),i.publicisFullInViewOTS=!0,e(u.moat,i,"publicisFullInViewOTS")};var it=(t,e,i)=>{const a=e.trackingState;if(!a.publicisFullInViewOTS){const o=e.trackingTimeoutList.publicisFullInViewOTSTimeout,n=a.isAdLarge?.3:e.getFullViewPercentage();t.intersectionRatio>=n?o.push(window.setTimeout(et,w,e,i)):e.trackingTimeoutList.publicisFullInViewOTSTimeout=r(o)}};var at=(t,e,i)=>{let a=!1;const o=e.trackingState;t.intersectionRatio>=I?e.startMrcViewTime||(e.startMrcViewTime=Date.now()):e.startMrcViewTime?(o.totalMrcViewTime=S(e,e.startMrcViewTime,o.totalMrcViewTime),a=!0,e.mrcTotalPeriodicTime=Date.now()-e.startMrcViewTime+e.mrcTotalPeriodicTime,e.startMrcViewTime=0):e.startMrcViewTime=0,a&&i(u.moat,o,"totalMrcViewTime")};const ot={5e3:T.INVIEW_50_5s,15e3:T.INVIEW_50_15s};var nt=(t,e)=>{t.intersectionRatio>=I?(e.lastInViewFiftyTime=Date.now(),e.trackingTimeoutList.viewabilityFiftyCumulativeTimeout=[...e.trackingTimeoutList.viewabilityFiftyCumulativeTimeout,...Object.keys(ot).filter((t=>!e.firedBeacons.has(t))).map((t=>window.setTimeout((()=>{((t,e)=>{t.firedBeacons.has(e)||(t.beaconUtil.fire(e,h.AD_VIEWABLE),t.firedBeacons.add(e))})(e,ot[t])}),Math.max(0,Number(t)-e.cumulativeInViewFifty))))]):(e.cumulativeInViewFifty+=Date.now()-e.lastInViewFiftyTime,e.trackingTimeoutList.viewabilityFiftyCumulativeTimeout=r(e.trackingTimeoutList.viewabilityFiftyCumulativeTimeout))};var st=(t,e)=>{t.intersectionRatio>=1&&!e.firedBeacons.has(T.FULL_VIEWABLE)&&(e.beaconUtil.fire(T.FULL_VIEWABLE,h.AD_VIEWABLE),e.firedBeacons.add(T.FULL_VIEWABLE))},rt=i(653105);const lt=t=>{var e,i,o;const n=t.trackingTimeoutList.viewabilityMRCStatusTimeout;var s,l;(n.length&&(t.trackingTimeoutList.viewabilityMRCStatusTimeout=r(n)),(0,a.v)().dspProcessingEnable&&(0,a.v)().dspViewabilityTracking&&null!=(e=t.displayAdProps)&&null!=(i=e.extendedDSPProps)&&null!=(o=i.viewabilityURLs)&&o.length)&&(0,rt.ZR)(null==(s=t.displayAdProps)||null==(l=s.extendedDSPProps)?void 0:l.viewabilityURLs);D(z,t,U,t.mrcTotalPeriodicTime,(()=>{t.beaconUtil.fire(m.MRC_VIEWABLE,g.AD_STATUS)}))};var ct=(t,e)=>{const i=e.trackingTimeoutList.viewabilityMRCStatusTimeout;t.intersectionRatio>=I?i.push(window.setTimeout(lt,w,e)):e.trackingTimeoutList.viewabilityMRCStatusTimeout=r(i)};class dt extends class{constructor(t,e,i,a,o){this.windowVisibleTimes=[],this.windowNotVisibleTime=null,this.touchOrClickTimeOffset=void 0,this.commonTrackingTimeoutList={[d]:[]},this.adCvValues=void 0,this.element=void 0,this.displayAdProps=void 0,this.trackingState=void 0,this.beaconUtil=void 0,this.onClickHandler=void 0,this.element=t,this.displayAdProps=e,this.trackingState=i,this.beaconUtil=a,this.adCvValues=o,this.trackingState.adLoadedTime=Date.now(),this.touchOrClickTimeOffset=0,this.trackingState.isAdLarge=this.adSizeCheck(),this.onClickHandler=this.onClick.bind(this)}onClick(){this.beaconUtil.fire(m.CLICK,h.AD_CLICK),this.element instanceof HTMLIFrameElement||this.element.removeEventListener("click",this.onClickHandler)}initialize(){this.beaconUtil.fire(m.AD_IMPRESSION,h.AD_IMPRESSION),c()((t=>{this.element.id===t.id&&"click"===t.type&&this.onClick()})),this.element instanceof HTMLIFrameElement||this.element.addEventListener("click",this.onClickHandler),b((()=>{"visible"!==document.visibilityState?this.windowNotVisibleTime=Date.now():"visible"===document.visibilityState&&(this.windowVisibleTimes.push({notVisible:this.windowNotVisibleTime,visible:Date.now()}),this.windowNotVisibleTime=null),(0,a.v)().display3PVisibilityCheck&&this.onVisibilityChange(document.visibilityState)}))}onVisibilityChange(t){}getFullViewPercentage(){return p(this.adCvValues)}getBaseTrackers(){return[V]}adSizeCheck(){return Number(this.element.offsetHeight)*Number(this.element.offsetWidth)>=242500}unmount(){for(const t of Object.values(this.commonTrackingTimeoutList))r(t);this.beaconUtil.fire(m.UNLOAD,h.AD_REMOVE)}}{constructor(t,e,i,a,o){super(t,e,i,a,o),this.startMrcViewTime=0,this.startFiftyPctContTime=0,this.startHundredPctContTime=0,this.startFullInViewOTS=0,this.mrcTotalPeriodicTime=0,this.cumulativeInViewFifty=0,this.lastInViewFiftyTime=0,this.groupMTotalPeriodicTime=0,this.firedBeacons=new Set,this.lastObservedEntry=null,this.trackingTimeoutList={[U]:[],[W]:[],[B]:[],[F]:[]},a.attachTracker(this,u.moat),this.initialize()}initialize(){super.initialize()}onVisibilityChange(t){this.lastObservedEntry&&("hidden"===t?this.getAllTrackers().filter((t=>t!==tt)).forEach((t=>{t({...this.lastObservedEntry,isIntersecting:!1,intersectionRatio:0},this,(()=>{}))})):"visible"===t&&this.getAllTrackers().filter((t=>t!==tt)).forEach((t=>{t(this.lastObservedEntry,this,(()=>{}))})))}getAdCustomInfo(){var t;const{advertiserID:e,orderID:i,adUnitID:o,metaData:n}=this.displayAdProps,s=n.dfpResponse,r=n.dfpParams,l=s.googleLineitemId,c=s.googleCreativeId,d=r.dfpTag,u=r.targeting,m=u.location,T=u.categoryId,f=u.ptype,h=e&&i&&l&&c?e+":"+i+":"+l+":"+c:void 0,g=(t=>{let{desktopImage:e,mobileImage:i,desktopLogo:a,mobileLogo:o,mainImage:n,logoImage:s,desktopBrandImage:r,mobileBrandImage:l,desktopBrandLogo:c,mobileBrandLogo:d}=t;return e||i||a||o||n||s||r||l||c||d})(this.displayAdProps);let I="";var p;(0,a.v)().dspProcessingEnable&&null!=(t=this.displayAdProps.extendedDSPProps)&&t.deviceType?I="desktop"===(null==(p=this.displayAdProps.extendedDSPProps)?void 0:p.deviceType)?"WMUS":"WMUS-Mobile":I=d&&d.split("/")[2]||"";return{adIds:h,adLocation:m,adUnitId:o,assetUrl:g,categoryId:T,dfpTag:I,pageType:f,random:this.displayAdProps.metaData.dfpParams.targeting.sessId}}unmount(){for(const t of Object.values(this.trackingTimeoutList))r(t);super.unmount()}getAllTrackers(){return[...this.getTrackers(),...this.getBaseTrackers()]}getTrackers(){return[Q,it,ct,at,X,J,$,...(0,a.v)().display3PVisibilityCheck?[tt]:[],...(0,a.v)().displayCommonTrackingExtendedEvents?[st,nt]:[]]}getPayload(t){return(0,a.v)().displayCommonTracking?x(this,t):j(this,t)}}var ut=i(220934);class mt{constructor(t,e,i,a){this.adUuid=void 0,this.commonDisplayAdPayload=void 0,this.trackingStates=void 0,this.onBeacon=void 0,this.trackers=void 0,this.adUuid=t,this.commonDisplayAdPayload=e,this.trackingStates=i,this.onBeacon=a,this.trackers=new Map}attachTracker(t,e){this.trackers.set(e,t)}payloadCheck(t,e){let i=!0;const a=new Set([k]),o=Object.keys(t),s=[];for(let n=0;n<o.length;n++){const e=o[n];void 0!==t[e]||a.has(e)||(s.push(e),i=!1)}return i||(0,n.L)({type:"BEACON_MISSING_KEY",payload:{action:e,missingKeys:s,payload:t}}),i}fire(t,e){const i={...this.commonDisplayAdPayload.metaData.beaconDebug||{},adSource:"S2S",ip:this.commonDisplayAdPayload.metaData.dfpParams.clientIp,s:this.adUuid,t:[],ignore:!1},o={};let n=!1;switch(t){case m.AD_IMPRESSION:case m.CLICK:case m.TOUCH:case m.MRC_VIEWABLE:case T.FULL_VIEWABLE:case T.INVIEW_50_15s:case T.INVIEW_50_5s:case m.UNLOAD:this.trackers.forEach(((s,r)=>{const{payload:l}=s.getPayload(t);var c;this.payloadCheck(l,e)&&(i.t.push(r),(0,a.v)().displayCommonTracking&&null!=(c=this.commonDisplayAdPayload.iasTeamId)&&c.length&&i.t.push(u.ias),(0,a.v)().displayCommonTracking?o.event=l:o[u.moat]=l,n=!0)}));break;case f.GROUPM_VIEWABLE:case f.PERIODIC_UPDATE:{const r=this.trackers.get(u.moat);if(r){const{payload:l}=r.getPayload(t);var s;if(this.payloadCheck(l,e))i.t.push(u.moat),(0,a.v)().displayCommonTracking&&null!=(s=this.commonDisplayAdPayload.iasTeamId)&&s.length&&i.t.push(u.ias),(0,a.v)().displayCommonTracking?o.event=l:o[u.moat]=l,n=!0}break}}if(!n)return;const r={mt:i,pl:o};ut.Y2.sendBeacon({context:"displayWlmt",action:"ads",name:e,payload:r}),this.onBeacon&&this.onBeacon(r)}}const Tt=t=>{let{elementRef:e,commonDisplayAdPayload:i,track3PEnable:r,onBeacon:l,dbg:c,root:d}=t;(t=>{let{target:e,commonDisplayAdPayload:i,track3PEnable:r,onBeacon:l,dbg:c,root:d}=t;const u=(0,a.v)(),m={root:d,rootMargin:"0px",threshold:[0,.3,I,p(u)]},T=(0,s.useMemo)((()=>(t=>{const e={};return t&&(e.moat={adLoadedTime:0,isAdLarge:!1,viewabilityMRC:!1,groupMViewable:!1,totalMrcViewTime:0,totalFiftyPctContTime:0,totalHundredPctContTime:0,publicisFullInViewOTS:!1,fullInViewOTS:0,eventTypeCount:{AD_IMPRESSION:0,CLICK:0,MRC_VIEWABLE:0,GROUPM_VIEWABLE:0,PERIODIC_UPDATE:0,TOUCH:0,UNLOAD:0}}),e})(r)),[r]),{0:f,1:h}=(0,s.useState)(e.current),g=(0,a.v)();(0,s.useEffect)((()=>{h(e.current)}),[e,h]);const w=(0,s.useMemo)((()=>i.uuId||""),[i]),y=(0,s.useRef)(new mt(w,i,T,l)),v=(0,s.useRef)(null);(0,s.useEffect)((()=>{r&&f&&!v.current&&(v.current=new dt(f,i,T.moat,y.current,g))}),[g,i,f,r,T.moat]),(0,s.useEffect)((()=>()=>{v.current&&v.current.unmount()}),[]);const b=(0,s.useCallback)(((t,e,i)=>{(0,n.L)({payload:{state:e},type:"GLASS_3P_AD_UPDATE",meta:{stateChange:t+":"+i,id:w}})}),[w]),C=(0,s.useCallback)((t=>{if(v.current&&r){const e=v.current.getTrackers(),i=v.current.getBaseTrackers();e.forEach((e=>{e(t,v.current,b)})),i.forEach((e=>{e(t,v.current,b)}))}}),[r,b]);(0,o.P)(e,C,m,{root:d,dbg:!0,auxData:{adType:"display",displayAd:i,dbg:c}})})({commonDisplayAdPayload:i,target:e,track3PEnable:r,onBeacon:l,dbg:c,root:d})}}}]);
List of functions to be instrumented: 53
Only instrumenting the following functions from the current script ks/ads_core_hooks_use-load-ivt-8777800673e02d96.js-function-1-1-1-18993
[Static analyzer] Function matching reported a match
[rtiDebugInfo]1 1
