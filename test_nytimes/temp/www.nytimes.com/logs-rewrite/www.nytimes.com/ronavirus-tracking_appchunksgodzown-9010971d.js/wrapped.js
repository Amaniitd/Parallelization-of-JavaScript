const s="https://www.nytimes.com",r="https://www.stg.nytimes.com";let n=s;function c(e){return"godzown:"+e}function l(){typeof location!="undefined"&&(/localhost/.test(location.hostname)||/preview/.test(location.hostname))&&(n=r)}async function d(e){try{const o=await fetch(`${n}/svc/int/godzown/u/${e}`,{headers:{Accept:"application/json"},credentials:"include"}),{contents:t}=await o.json();return t}catch{try{let t=JSON.parse(localStorage[c(e)]);return i(e,t),t}catch(t){return console.error("localStorage read failed",t),null}}}async function i(e,o={}){const t=JSON.stringify(o);try{localStorage[c(e)]=t}catch(a){console.error("localStorage set failed",a)}await fetch(n+"/svc/int/godzown/u/"+e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:t})}export{l as a,d as g,i as s};
