/home/aman/Desktop/Parallelization-of-JavaScript/horcrux-instrumentation-rewriter/node_modules/falafel/index.js
Options are {"useProxy":true,"caching":false,"include_prefix":false,"path":"MDb/design/prototypes/nwb/HybridNativeWebBridge.js","origPath":"/images/G/01/IMDb/design/prototypes/nwb/HybridNativeWebBridge.js","e2eTesting":false,"pageLoaded":"false;","invocation_limit":"5000;","pattern":"record","proxyName":"__tracerPROXY"}
{
  useProxy: true,
  caching: false,
  include_prefix: false,
  path: 'MDb/design/prototypes/nwb/HybridNativeWebBridge.js',
  origPath: '/images/G/01/IMDb/design/prototypes/nwb/HybridNativeWebBridge.js',
  e2eTesting: false,
  pageLoaded: 'false;',
  invocation_limit: '5000;',
  pattern: 'record',
  proxyName: '__tracerPROXY',
  cg: [
    'www.imdb.com/-script-7-function-60-1-61-220',
    'www.imdb.com/-script-185-function-1475-1-1478-188',
    'www.imdb.com/-script-7-function-93-169-93-305',
    'www.imdb.com/-script-185-function-1406-172-1406-247',
    'www.imdb.com/-script-185-function-1461-79-1461-108',
    'www.imdb.com/-script-185-function-1430-1-1437-173',
    'www.imdb.com/-script-185-function-1449-87-1449-230',
    'www.imdb.com/-script-185-function-1418-311-1418-484',
    'www.imdb.com/-script-185-function-1353-1-1353-480',
    'www.imdb.com/-script-6-function-31-171-31-263',
    'www.imdb.com/-script-11-function-133-1-133-436',
    'www.imdb.com/-script-7-function-94-0-94-38',
    'www.imdb.com/-script-185-function-1459-1-1462-79',
    'www.imdb.com/-script-185-function-1418-1-1421-172',
    'www.imdb.com/-script-61-function-1233-336-1234-51',
    'www.imdb.com/-script-7-function-108-93-108-434',
    'www.imdb.com/-script-7-function-56-122-56-301',
    'www.imdb.com/-script-185-function-1380-1-1382-194',
    'www.imdb.com/-script-185-function-1427-1-1429-63',
    '/images/S/sash/PZ1YbFK2Lr$6ps7.js-function-1-1-1-400881',
    'www.imdb.com/-script-6-function-31-78-31-137',
    '/images/S/sash/PZ1YbFK2Lr$6ps7.js-function-1-400542-1-400631',
    'www.imdb.com/-script-42-function-797-1-799-179',
    'www.imdb.com/-script-185-function-1368-1-1368-326',
    'www.imdb.com/-script-185-function-1353-329-1353-418',
    'www.imdb.com/-script-185-function-1448-1-1452-480',
    'www.imdb.com/-script-7-function-56-1-56-447',
    'www.imdb.com/-script-31-function-714-43-728-9',
    'www.imdb.com/-script-42-function-802-1-803-164',
    'www.imdb.com/-script-185-function-1353-15-1353-45',
    'www.imdb.com/-script-185-function-1389-1-1389-141',
    'www.imdb.com/-script-185-function-1438-1-1439-472',
    'next/static/chunks/pages/index-4cc377efb99db396.js-function-1-1-1-98570',
    'www.imdb.com/-script-185-function-1406-254-1406-334',
    'www.imdb.com/-script-42-function-793-1-794-78',
    'www.imdb.com/-script-185-function-1485-1-1487-37',
    'www.imdb.com/-script-7-function-101-204-101-235',
    'www.imdb.com/-script-185-function-1435-331-1436-108',
    'www.imdb.com/-script-185-function-1379-1-1379-224',
    'www.imdb.com/-script-31-function-680-1-738-1',
    'www.imdb.com/-script-185-function-1373-1-1373-349',
    'www.imdb.com/-script-185-function-1440-1-1442-245',
    '/_next/static/chunks/2edb282b-45c56c19221816df.js-function-1-1-1-71781',
    'www.imdb.com/-script-7-function-108-1-109-142',
    'www.imdb.com/-script-61-function-1233-1-1237-315',
    'www.imdb.com/-script-7-function-94-60-100-423',
    'www.imdb.com/-script-185-function-1385-1-1386-302',
    '/_next/static/chunks/c30a072d-2b953a30e97f941e.js-function-1-1-1-117235',
    '/images/S/sash/PZ1YbFK2Lr$6ps7.js-function-1-56748-1-58063',
    '_next/static/lPyyeF9U_giVaLnp4xotB/_ssgManifest.js-function-1-1-1-132',
    'S/apesafeframe/ape/sf/desktop/DAsf-1.50.d327519.js-function-1-1-15-33792',
    '/images/S/sash/PZ1YbFK2Lr$6ps7.js-function-1-57165-1-57622',
    'www.imdb.com/-script-185-function-1392-1-1394-231',
    'www.imdb.com/-script-7-function-56-309-56-446',
    'www.imdb.com/-script-7-function-92-1-104-48',
    '/_next/static/chunks/framework-735a6db3a2e8e4c5.js-function-1-1-1-150034',
    'www.imdb.com/-script-42-function-792-1-792-433',
    'www.imdb.com/-script-6-function-31-67-31-283',
    'www.imdb.com/-script-13-function-134-12-163-1',
    'www.imdb.com/-script-7-function-56-330-56-445',
    'www.imdb.com/-script-185-function-1413-1-1415-20',
    'www.imdb.com/-script-185-function-1370-1-1371-37',
    'www.imdb.com/-script-185-function-1422-1-1426-150'
  ]
}
parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"WBRF":[function(require,module,exports) {
"use strict";function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){return function(r){var t=this;if(void 0===r&&(r=[]),this.observers=[],this.clear=function(){for(var e=t.observers.length-1;e>0;e--)t.observers.splice(e,1)},this.notify=function(e,r){"string"==typeof e&&t.observers.forEach(function(o){t.notifyObserver(o,e,r)})},this.notifyObserver=function(r,t,o){r&&"object"===e(r)&&r[t]&&"function"==typeof r[t]&&r[t].apply(r,o)},this.subscribe=function(r){return!(!r||"object"!==e(r)||-1!==t.observers.indexOf(r)||(t.observers.push(r),0))},this.unsubscribe=function(e){var r=t.observers.indexOf(e);return!(!e||-1===r||(t.observers.splice(r,1),0))},this.getAllObserverKeys=function(){var e=new Set;return t.observers.forEach(function(r){Object.keys(r).forEach(function(r){e.add(r)})}),e},!(r instanceof Array))throw new TypeError("Notifiers should be instantiated with either an Array of observers or no argument at all. Received "+r);this.clear(),r.forEach(function(e){return t.subscribe(e)})}}();exports.default=r;
},{}],"tGJt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e;try{t=JSON.parse(e)}catch(r){t=e}return t};
},{}],"o2OF":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var s=Array(e),n=0;for(t=0;t<i;t++)for(var o=arguments[t],r=0,a=o.length;r<a;r++,n++)s[n]=o[r];return s},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NativeWebBridge=void 0;var s=i(require("@imdb/gungnir/notifier")),n=i(require("./utils/parseStringOrJSON")),o={onScrollChange:"scrollOffset",onViewportSizeChange:"viewportSize",onWidgetSizeChange:"widgetSize",onWidgetReadyForDisplayChange:"readyForDisplay"},r=function(){function i(i){var r=this;this.notifier=new s.default,this.subscriptions=new Set,this.updateValueStore=new Map,this._displayReady=!1,this.isBrowser=!1,this.displayData={readyForDisplay:!1,viewportSize:{width:0,height:0},widgetSize:{width:0,height:0},scrollOffset:0},this.sendUpdate=function(e,t){var i=n.default(t);r.storeUpdateValue(e,i),r.notify(e,[i]),r.validateDisplayReady()},this.handleResponse=function(e,t,i){r.context.handleResponse(e,t,i)},this.subscribe=function(e){var t=r.notifier.subscribe(e);return r.notifyExistingSubscriptions(Object.keys(e)),r.subscribeToObserverKeys(r.notifier.getAllObserverKeys()).then(function(){}).catch(function(e){console.warn("NativeWebBridge.subscribe() error",e)}),t},this.unsubscribe=function(e){return r.notifier.unsubscribe(e)},this.getScreenSize=function(){return r.context.sendRequest("getScreenSize")},this.getViewportSize=function(){return r.context.sendRequest("getViewportSize")},this.getWidgetSize=function(){return r.context.sendRequest("getWidgetSize")},this.getTheme=function(){return r.context.sendRequest("getTheme")},this.getPlatform=function(){return r.context.sendRequest("getPlatform")},this.getIsUserLoggedIn=function(){return r.context.sendRequest("getIsUserLoggedIn")},this.getWatchlistStatus=function(e){return r.context.sendRequest("getWatchlistStatus",{tconst:e})},this.setAllowHorizontalScroll=function(){return r.context.sendRequest("setAllowHorizontalScroll")},this.setWidgetAspectRatio=function(e){return"number"!=typeof e||e<=0?new Promise(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];t[1]({type:"invalidValue",message:"setWidgetAspectRatio can not be less than or equal to zero - [aspectRatio argument = "+e+"]"})}):new Promise(function(t,i){r.context.sendRequest("setWidgetAspectRatio",{aspectRatio:e}).then(function(e){r.notify("onWidgetSizeChange",[e]),t(e)}).catch(function(e){i(e)})})},this.subscribeToScrollChanges=function(e){return void 0===e&&(e=!0),r.addSubscription("subscribeToScrollChanges",{realtime:e})},this.unsubscribeFromScrollChanges=function(){return r.removeSubscription("unsubscribeFromScrollChanges")},this.addToWatchlist=function(e){return r.context.sendRequest("addToWatchlist",{tconst:e})},this.removeFromWatchlist=function(e){return r.context.sendRequest("removeFromWatchlist",{tconst:e})},this.playVideoWithTrackers=function(e,t){return r.context.sendRequest("playVideoWithTrackers",{videoId:e,trackers:t})},this.broadcastAction=function(t){return"string"!=typeof t?new Promise(function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];i[1]({type:"invalidValue",data:"NativeWebBridge.broadcastAction() must be a string. Argument is : "+e(t)})}):r.context.sendRequest("broadcastAction",{data:t})},this.addSubscription=function(e){for(var i,s=[],n=1;n<arguments.length;n++)s[n-1]=arguments[n];return r.subscriptions.has(e)?new Promise(function(e){e()}):(r.subscriptions.add(e),(i=r.context).sendRequest.apply(i,t([e],s)))},this.removeSubscription=function(e){return r.subscriptions.has(e)?(r.subscriptions.delete(e),r.context.sendRequest(e)):new Promise(function(e){e()})},this.notifyExistingSubscriptions=function(e){e.forEach(function(e){r.updateValueStore.has(o[e])&&r.notify(e,[r.updateValueStore.get(o[e])])})},this.notify=function(e){for(var i,s=[],n=1;n<arguments.length;n++)s[n-1]=arguments[n];(i=r.notifier).notify.apply(i,t([e],s))},this.subscribeToWidgetSizeChanges=function(){return r.addSubscription("subscribeToWidgetSizeChanges")},this.subscribeToViewportSizeChanges=function(){return r.addSubscription("subscribeToViewportSizeChanges")},this.subscribeToBroadcasts=function(){return r.addSubscription("subscribeToBroadcasts")},this.subscribeToWidgetReadyForDisplayChanges=function(){return r.addSubscription("subscribeToWidgetReadyForDisplayChanges")},this.subscribeToDisplayReady=function(){var e=[r.subscribeToViewportSizeChanges(),r.subscribeToWidgetSizeChanges(),r.subscribeToScrollChanges(),r.subscribeToWidgetReadyForDisplayChanges()];return new Promise(function(t,i){Promise.all(e).then(function(){t()}).catch(function(e){i({reason:e})})})},this.subscribeToObserverKeys=function(e){var t=[];return e.forEach(function(e){switch(e){case"onWidgetReadyForDisplayChange":t.push(r.subscribeToWidgetReadyForDisplayChanges());break;case"onScrollChange":t.push(r.subscribeToScrollChanges());break;case"onWidgetSizeChange":t.push(r.subscribeToWidgetSizeChanges());break;case"onViewportSizeChange":t.push(r.subscribeToViewportSizeChanges());break;case"onBroadcastAction":t.push(r.subscribeToBroadcasts());break;case"onDisplayReady":t.push(r.subscribeToDisplayReady())}}),new Promise(function(e,i){Promise.all(t).then(function(){e(!0)}).catch(function(e){i(e)})})},this.storeUpdateValue=function(e,t){if("string"==typeof o[e])switch(r.updateValueStore.set(o[e],t),e){case"displayReady":r.displayData.readyForDisplay=t;break;case"widgetSize":r.displayData.widgetSize=t;break;case"viewportSize":r.displayData.viewportSize=t;break;case"scrollOffset":r.displayData.scrollOffset=t}},this.validateDisplayReady=function(){if(!r.displayReady){var e=r.updateValueStore;e.has("viewportSize")&&e.has("widgetSize")&&e.has("scrollOffset")&&e.has("readyForDisplay")&&e.get("readyForDisplay")&&(r._displayReady=!0,r.displayData.readyForDisplay=e.get("readyForDisplay"),r.displayData.viewportSize=e.get("viewportSize"),r.displayData.widgetSize=e.get("widgetSize"),r.displayData.scrollOffset=e.get("scrollOffset"),r.notifier.notify("onDisplayReady",[r.displayData]))}},this.context=i,this.context.isBrowser&&(this.isBrowser=!0,this.context.updateMethod=this.sendUpdate)}return Object.defineProperty(i.prototype,"displayReady",{get:function(){return this._displayReady},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"element",{get:function(){return this.context.element},set:function(e){this.context.element=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"root",{get:function(){return this.context.root},set:function(e){this.context.root=e},enumerable:!1,configurable:!0}),i}();exports.NativeWebBridge=r,exports.default=r;
},{"@imdb/gungnir/notifier":"WBRF","./utils/parseStringOrJSON":"tGJt"}],"StlK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var x=/[xy]/g,e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";exports.default=function(){var r=Date.now();return e.replace(x,function(x){var e=(r+16*Math.random())%16|0;return r=Math.floor(r/16),("x"==x?e:3&e|8).toString(16)})};
},{}],"xlgf":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var i=t(require("../utils/generateUUID")),n=t(require("../utils/parseStringOrJSON")),o=function(){function t(){var o=this;this.promiseMap=new Map,this.isIOS=t.isIOS(),this.isAndroid=t.isAndroid(),this.sendRequest=function(t,n){return void 0===n&&(n=null),new Promise(function(r,s){var d=i.default();try{if(o.promiseMap.set(d,{key:t,resolve:r,reject:s}),o.isIOS){var u={key:t,data:n,uuid:d};window.webkit.messageHandlers.nativeRequest.postMessage(u)}else{if(!o.isAndroid)throw new Error("could not find a Native Request handler");var a="object"===e(n)?JSON.stringify(n):n;window.NativeWebBridgeAndroid.sendRequest(t,d,a)}}catch(f){o.promiseMap.delete(d),s({type:"native",error:f})}})},this.handleResponse=function(e,t,i){var r,s=o.promiseMap.get(e);s?i?s.reject({type:"native",error:i}):"string"==typeof t?(r=n.default(t),s.resolve(r)):s.resolve(t):console.warn("promise id "+e+" not found"),o.promiseMap.delete(e)}}return t.hasAppContext=function(){return t.isIOS()||t.isAndroid()},t.isIOS=function(){return void 0!==window.webkit&&void 0!==window.webkit.messageHandlers&&void 0!==window.webkit.messageHandlers.nativeRequest&&"function"==typeof window.webkit.messageHandlers.nativeRequest.postMessage},t.isAndroid=function(){return void 0!==window.NativeWebBridgeAndroid&&void 0!==window.NativeWebBridgeAndroid.sendRequest},t}();exports.default=o;
},{"../utils/generateUUID":"StlK","../utils/parseStringOrJSON":"tGJt"}],"Ai1e":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3],n="Expected a function",e=NaN,i="[object Symbol]",r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,f=/^0o[0-7]+$/i,a=parseInt,c="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,s=c||l||Function("return this")(),v=Object.prototype,p=v.toString,y=Math.max,d=Math.min,m=function(){return s.Date.now()};function b(t,e,i){var r,o,u,f,a,c,l=0,s=!1,v=!1,p=!0;if("function"!=typeof t)throw new TypeError(n);function b(n){var e=r,i=o;return r=o=void 0,l=n,f=t.apply(i,e)}function g(t){var n=t-c;return void 0===c||n>=e||n<0||v&&t-l>=u}function h(){var t=m();if(g(t))return x(t);a=setTimeout(h,function(t){var n=e-(t-c);return v?d(n,u-(t-l)):n}(t))}function x(t){return a=void 0,p&&r?b(t):(r=o=void 0,f)}function T(){var t=m(),n=g(t);if(r=arguments,o=this,c=t,n){if(void 0===a)return function(t){return l=t,a=setTimeout(h,e),s?b(t):f}(c);if(v)return a=setTimeout(h,e),b(c)}return void 0===a&&(a=setTimeout(h,e)),f}return e=O(e)||0,j(i)&&(s=!!i.leading,u=(v="maxWait"in i)?y(O(i.maxWait)||0,e):u,p="trailing"in i?!!i.trailing:p),T.cancel=function(){void 0!==a&&clearTimeout(a),l=0,r=c=o=a=void 0},T.flush=function(){return void 0===a?f:x(m())},T}function g(t,e,i){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError(n);return j(i)&&(r="leading"in i?!!i.leading:r,o="trailing"in i?!!i.trailing:o),b(t,e,{leading:r,maxWait:e,trailing:o})}function j(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function h(t){return!!t&&"object"==typeof t}function x(t){return"symbol"==typeof t||h(t)&&p.call(t)==i}function O(t){if("number"==typeof t)return t;if(x(t))return e;if(j(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=j(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var i=u.test(t);return i||f.test(t)?a(t.slice(2),i?2:8):o.test(t)?e:+t}module.exports=g;
},{}],"jaYC":[function(require,module,exports) {
"use strict";function e(e,t,r){var u=t<=r?t:r,o=t>=r?t:r;return u===o?u:e<u?u:e>o?o:e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"kHqO":[function(require,module,exports) {
"use strict";function o(r){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(r)}function r(o,r){for(var t=[],e=o[r].length,n=0;n<e;n++)t.push(r+"[]="+o[r][n]);return t}function t(t){if(!t)return"";var e,n=[];for(e in t)Array.isArray(t[e])?n=n.concat(r(t,e)):"object"===o(t[e])?n.push(e+"="+JSON.stringify(t[e])):n.push(e+"="+t[e]);return n.join("&")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.encodeAsFormData=exports.encodeArray=void 0,exports.encodeArray=r,exports.encodeAsFormData=t;
},{}],"fwHL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLoginStatus=void 0;var e="/registration/is-user-recognized";function t(){return new Promise(function(t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState)try{var e=JSON.parse(n.response);e&&!0===e.isUserRecognized?t():r()}catch(s){r()}},n.open("GET",e),n.send()})}exports.getLoginStatus=t;
},{}],"VfQ5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WatchlistAPI=void 0;var t=require("../../utils/xhr"),e=require("../user"),n=require("../../notifier"),s="/watchlist/",r="/list/_ajax/watchlist_has",i="watchlistRibbon",o=new n.default,a=!1;function c(t){return Array.isArray(t)?t:t.indexOf(",")>-1?t.replace(/\s+/g,"").split(","):[t]}function d(t,e,n){return function(){4===t.readyState&&(200!==t.status?n({type:"xmlhttprequestError",error:t}):200!==(t.response.hasOwnProperty("status")?t.response.status:t.status)?n({type:"xmlhttprequestError",error:t}):e(t.response))}}function u(e,n){return new Promise(function(i,o){var a=t.encodeAsFormData(n),c=new XMLHttpRequest;switch(c.onreadystatechange=d(c,i,o),c.responseType="json",e){case"add":c.open("PUT",s+n.consts),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(a);break;case"remove":c.open("DELETE",s+n.consts),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(a);break;case"get":c.open("POST",r,!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(a);break;default:o({type:"invalidRequestMethod",error:e})}})}function l(t){window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.widgetWatchlistEventHandler&&"function"==typeof window.webkit.messageHandlers.widgetWatchlistEventHandler.postMessage&&window.webkit.messageHandlers.widgetWatchlistEventHandler.postMessage(JSON.stringify(t)),window.androidWidgetEventHandler&&window.androidWidgetEventHandler.handleWatchlistEvent&&"function"==typeof window.androidWidgetEventHandler.handleWatchlistEvent&&window.androidWidgetEventHandler.handleWatchlistEvent(JSON.stringify(t))}function w(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];o.notify(t,e)}var h=function(){return function(){this.contains=function(t){var n={consts:c(t),tracking_tag:i};return new Promise(function(t,s){var r=function(e){for(var s=n.consts.length,r=e&&void 0!==e.has,i=0;i<s&&r;i++)r=void 0!==e.has[n.consts[i]];t(r)};a?u("get",n).then(r).catch(s):e.getLoginStatus().then(function(){a=!0,u("get",n).then(r).catch(s)}).catch(function(){a=!1,s({type:"unrecognizedUser"})})})},this.add=function(t){var n={consts:c(t),tracking_tag:i};return new Promise(function(t,s){var r=function(e){var s={titleId:n.consts[0]};e.list_item_id&&(s.listItemId="li"+e.list_item_id),l(s),t(e)};a?u("add",n).then(r).catch(s):e.getLoginStatus().then(function(){a=!0,u("add",n).then(r).catch(s)}).catch(function(){a=!1,s({type:"unrecognizedUser"})})})},this.remove=function(t){var e={consts:c(t),tracking_tag:i};return new Promise(function(t,n){u("remove",e).then(function(){l({titleId:e.consts[0]}),t()}).catch(n)})},this.subscribe=function(t){return o.subscribe(t)},this.unsubscribe=function(t){return o.unsubscribe(t)}}}();exports.WatchlistAPI=h;var f=new h;exports.default=f;
},{"../../utils/xhr":"kHqO","../user":"fwHL","../../notifier":"WBRF"}],"jVHQ":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../utils/generateUUID")),n=e(require("lodash.throttle")),o=e(require("@imdb/gungnir/utils/clamp")),i=e(require("@imdb/gungnir/imdb/watchlist/watchlistAPI")),s=require("@imdb/gungnir/imdb/user"),r="nativewebbridgebroadcast",l=function(){function e(e,o,l){var a=this;this.subscribedToBroadcasts=!1,this.subscribedToViewport=!1,this.subscribedToWidget=!1,this.promiseMap=new Map,this._offsetElementPosition={x:0,y:0},this._root=window,this._scrollFPS=60,this.isBrowser=!0,this.sendRequest=function(e,n){return void 0===n&&(n=null),new Promise(function(o,i){if(void 0!==a[e]){var s=t.default();a.promiseMap.set(s,{key:e,resolve:o,reject:i}),a[e](s,n)}else i({type:"unsupportedFeature",error:"NativeWebBridge - BrowserContext["+e+"] is undefined"})})},this.handleResponse=function(e,t,n){var o=a.promiseMap.get(e);o?n?o.reject({type:"native",error:n}):o.resolve(t):console.warn("promise id "+e+" not found"),a.promiseMap.delete(e)},this.getScreenSize=function(e){var t={width:window.screen.availWidth,height:window.screen.availHeight};a.handleResponse(e,t)},this.getWidgetSize=function(e){if(a.element){var t=a.element.getBoundingClientRect(),n=t.width,o=t.height;a.handleResponse(e,{width:n,height:o})}else a.handleResponse(e,null,{type:"invalidValue",message:"no element defined in BrowserContext"})},this.getViewportSize=function(e){if(a.root){var t=a.calculateViewportSize();a.handleResponse(e,t)}else a.handleResponse(e,null,{type:"invalidValue",message:"no root defined in BrowserContext"})},this.getIsUserLoggedIn=function(e){s.getLoginStatus().then(function(t){a.handleResponse(e,t)}).catch(function(t){a.handleResponse(e,null,t)})},this.getTheme=function(e){a.handleResponse(e,"")},this.getPlatform=function(e){a.handleResponse(e,"browser")},this.getWatchlistStatus=function(e,t){i.default.contains(t.tconst).then(function(t){a.handleResponse(e,t)}).catch(function(t){a.handleResponse(e,null,t)})},this.setWidgetAspectRatio=function(e,t){var n=t.aspectRatio;if(a.element){var o=a.element.clientWidth,i=Math.round(a.element.clientWidth/n);a.element.style.height=i+"px",a.handleResponse(e,{width:o,height:i})}else a.handleResponse(e,null,{type:"invalidValue",message:"no element defined in BrowserContext"})},this.setAllowHorizontalScroll=function(e){a.handleResponse(e,!0)},this.subscribeToScrollChanges=function(e){a.element?a.root?(a._offsetElementPosition=a.calculateOffsetElementPosition(),a.intersectionObserver=new IntersectionObserver(a.intersectionListener),a.intersectionObserver.observe(a.element),a.scroll(),a.handleResponse(e,!0)):a.handleResponse(e,null,{type:"invalidValue",message:"root undefined, could not subscribe to scroll change"}):a.handleResponse(e,null,{type:"invalidValue",message:"element undefined, could not subscribe to scroll change"})},this.unsubscribeFromScrollChanges=function(e){a.intersectionObserver.unobserve(a.element),a.intersectionObserver=null,a.removeScrollListener(),a.handleResponse(e,!0)},this.subscribeToBroadcasts=function(e){a.subscribedToBroadcasts||(a.subscribedToBroadcasts=!0,window.top.addEventListener(r,a.handleBroadcastEvent)),a.handleResponse(e,!0)},this.subscribeToWidgetSizeChanges=function(e){a.handleResponse(e,!0);var t=a.calculateWidgetSize();null!==t&&a.updateMethod("onWidgetSizeChange",t),a.subscribedToWidget||(a.subscribedToWidget=!0,a.root.removeEventListener("resize",a.throttledResize),a.root.addEventListener("resize",a.throttledResize))},this.subscribeToViewportSizeChanges=function(e){a.handleResponse(e,!0);var t=a.calculateViewportSize();null!==t&&a.updateMethod("onViewportSizeChange",t),a.subscribedToViewport||(a.subscribedToViewport=!0,a.root.removeEventListener("resize",a.throttledResize),a.root.addEventListener("resize",a.throttledResize))},this.subscribeToWidgetReadyForDisplayChanges=function(e){a.handleResponse(e,!0),a.updateMethod("onWidgetReadyForDisplayChange",!0)},this.addToWatchlist=function(e,t){i.default.add(t).then(function(t){a.handleResponse(e,t)}).catch(function(t){a.handleResponse(e,null,t)})},this.removeFromWatchlist=function(e,t){i.default.remove(t).then(function(t){a.handleResponse(e,t)}).catch(function(t){a.handleResponse(e,null,t)})},this.playVideoWithTrackers=function(e,t){a.handleResponse(e,null,{message:"Play video with trackers is not yet supported in browser",type:"unsupportedFeature"})},this.broadcastAction=function(e,t){window.top.dispatchEvent(new CustomEvent(r,{detail:t.data})),a.handleResponse(e,!0)},this.handleBroadcastEvent=function(e){e.detail&&a.updateMethod("onBroadcastAction",e.detail)},this.intersectionListener=function(e){e[0].isIntersecting?a.addScrollListener():a.removeScrollListener()},this.addScrollListener=function(){a.root&&(a._offsetElementPosition=a.calculateOffsetElementPosition(),a.root.removeEventListener("scroll",a.throttledScroll),a.root.addEventListener("scroll",a.throttledScroll),a.scroll())},this.removeScrollListener=function(){a.root&&(a.root.removeEventListener("scroll",a.throttledScroll),a.scroll())},this.scroll=function(){var e=a.offsetElementPosition.y-a.root.scrollY;a.updateMethod("onScrollChange",e)},this.resize=function(){if(a.subscribedToWidget){var e=a.calculateWidgetSize();e&&a.updateMethod("onWidgetSizeChange",e)}if(a.subscribedToViewport){var t=a.calculateViewportSize();t&&a.updateMethod("onViewportSizeChange",t)}},this.beforeunload=function(){a.updateMethod("onPageHide")},this.calculateOffsetElementPosition=function(){for(var e=0,t=0,n=a.offsetElement,o=a.root.document.body;n&&n!==o;)e+=n.offsetLeft-n.scrollLeft+n.clientLeft,t+=n.offsetTop-n.scrollTop+n.clientTop,n=n.offsetParent;return{x:e,y:t}},this.calculateWidgetSize=function(){if(a.element){var e=a.element.getBoundingClientRect(),t=e.width,n=e.height;return a._offsetElementPosition=a.calculateOffsetElementPosition(),{width:t,height:n}}return null},this.calculateViewportSize=function(){return a.root?{width:a.root.innerWidth,height:a.root.innerHeight}:null},this.element=e,this.offsetElement=l||e,this.throttledResize=n.default(this.resize,100),this.throttledScroll=n.default(this.scroll,1e3/this.scrollFPS,{leading:!0}),o?this.root=o:this._root.addEventListener("beforeunload",this.beforeunload)}return Object.defineProperty(e.prototype,"element",{get:function(){return this._element},set:function(e){if(e){var t=this._element;this._element=e,this.offsetElement===t&&(this.offsetElement=e)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetElement",{get:function(){return this._offsetElement},set:function(e){if(e){var t=this._offsetElement;this._offsetElement=e,this._offsetElementPosition=this.calculateOffsetElementPosition(),this.intersectionObserver&&(t&&this.intersectionObserver.unobserve(t),this.intersectionObserver.observe(this._offsetElement))}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},set:function(e){this._root.removeEventListener("beforeunload",this.beforeunload),e&&(this._root=e,this._root.addEventListener("beforeunload",this.beforeunload))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollFPS",{get:function(){return this._scrollFPS},set:function(e){this._scrollFPS=o.default(e,1,60),this.throttledScroll=n.default(this.scroll,1e3/this.scrollFPS,{leading:!0})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetElementPosition",{get:function(){return this._offsetElementPosition},enumerable:!1,configurable:!0}),e}();exports.default=l;
},{"../utils/generateUUID":"StlK","lodash.throttle":"Ai1e","@imdb/gungnir/utils/clamp":"jaYC","@imdb/gungnir/imdb/watchlist/watchlistAPI":"VfQ5","@imdb/gungnir/imdb/user":"fwHL"}],"KwEG":[function(require,module,exports) {
"use strict";function t(t){void 0===t&&(t="top");var o=null;if(!o&&"top"===t){var n=null;try{n=void 0!==window.top.location.search?window.top:null}catch(e){}o=n}if(!o&&"parent"===t){n=null;try{n=void 0!==window.parent.location.search?window.parent:null}catch(e){}o=n}return o||(o=window),o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"ilLD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDetectedPlatform=void 0;var e=require("../utils/windowTarget"),i=/^http(s)?\:\/\/m\.(.*\.)?imdb\.com/,t=/(Android|OS|Windows Phone) (\d+)[\._](\d+)[\._]?(\d+)?/,r=/Android (\d{2,})/,n=/iP(hone|ad|od)/,o=/Version\/[\d\.]+.*Safari/,s="IMDb-flg",a="Windows Phone",c="Android",u="ontouchstart",f="Chrome/",h=/(Chrome|Safari|MSIE|Firefox)/,d=/(SamsungBrowser|Galaxy Nexus Build|iPhone OS 8|iPhone OS 7)/,p=function(){function e(){this._isWindowsDevice=!1,this._isIOSDevice=!1,this._isAndroidDevice=!1,this._isIMDbApp=!1,this._isSafari=!1,this._isMobileDevice=!1,this._isMobileSite=!1,this._hasTouch=!1,this._mobilePlatformVersion={major:0,minor:0,patch:0,androidAPI:0},this._chromeVersion=0,this._canAutoplay=!1,this._canTransitionTransform=!1,this._siteVariant="";var e=window.navigator.userAgent,t=window.location.href;this._isWindowsDevice=e.indexOf(a)>-1,this._isIOSDevice=e.search(n)>-1,this._isAndroidDevice=e.indexOf(c)>-1,this._isIMDbApp=e.indexOf(s)>-1,this._isSafari=e.search(o)>-1,this._isMobileDevice=this._isWindowsDevice||this._isIOSDevice||this._isAndroidDevice,this._isMobileSite=t.search(i)>-1,this._hasTouch=void 0!==document[u],this._mobilePlatformVersion=v(e,this.isIMDbApp,this.isAndroidDevice),this._chromeVersion=m(e),this._canAutoplay=D(this.mobilePlatformVersion,this.isIMDbApp,this.isAndroidDevice,this.isIOSDevice,this.isMobileDevice),this._canTransitionTransform=this.isDesktopSite||_(e,this.isIMDbApp,this.isAndroidDevice,this.mobilePlatformVersion),this._siteVariant=b(this.isIMDbApp,this.isIOSDevice,this.isAndroidDevice,this.isMobileSite)}return Object.defineProperty(e.prototype,"isWindowsDevice",{get:function(){return this._isWindowsDevice},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isIOSDevice",{get:function(){return this._isIOSDevice},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAndroidDevice",{get:function(){return this._isAndroidDevice},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobileDevice",{get:function(){return this._isMobileDevice},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isIMDbApp",{get:function(){return this._isIMDbApp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSafari",{get:function(){return this._isSafari},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDesktopSite",{get:function(){return!this.isMobileDevice},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobileSite",{get:function(){return this._isMobileSite},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasTouch",{get:function(){return this._hasTouch},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chromeVersion",{get:function(){return this._chromeVersion},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mobilePlatformVersion",{get:function(){return this._mobilePlatformVersion},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canAutoplay",{get:function(){return this._canAutoplay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canTransitionTransform",{get:function(){return this._canTransitionTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"siteVariant",{get:function(){return this._siteVariant},enumerable:!1,configurable:!0}),e}();function l(){var i=window.navigator.userAgent.toLowerCase(),t=e.default("top").location.search.match(/platform=(\w+)/)||[],r=DeviceInfo.PlatformType.unknown;switch(!0){case null!==t&&t.length>0:var n=t[1];void 0!==DeviceInfo.PlatformType[n]&&(r=DeviceInfo.PlatformType[n]);break;case i.indexOf("iphone")>-1:r=DeviceInfo.PlatformType.ios;break;case i.indexOf("android")>-1:r=DeviceInfo.PlatformType.android;break;default:r=DeviceInfo.PlatformType.web}return r}function b(e,i,t,r){var n="";return e?(n="app",n+=i?"-ios-ph":t?"-andr-ph":"-unknown"):n=r?"mobile":"web",n}function m(e){return-1!==e.indexOf(f)?parseInt(e.substr(e.indexOf(f)+f.length,2),10):0}function v(e,i,n){var o,s={major:0,minor:0,patch:0,androidAPI:0};((o=e.match(t))&&o.length>0&&(s.major=parseInt(o[2],10)||0,s.minor=parseInt(o[3],10)||0,s.patch=parseInt(o[4],10)||0),i&&n)&&((o=e.match(r))&&o.length>0?s.androidAPI=parseInt(o[1],10)||0:s.androidAPI=0);return s}function D(e,i,t,r,n){return i?t?e.androidAPI>=17||e.major>=4&&!(4===e.major&&e.minor<2):!!(r&&e.major>=4):!n}function _(e,i,t,r){var n=!t&&r.major<9;if(i)return!n;if(d.test(e))return!1;if(h.test(e)){if(-1!==e.indexOf(f)){var o=m(e);if(!Number.isNaN(o)&&o<46)return!1}return!0}return!1}exports.getDetectedPlatform=l;var g=new p;Object.freeze(g),exports.default=g;
},{"../utils/windowTarget":"KwEG"}],"kIhC":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("..")),i=e(require("../native/AppContext")),a=e(require("../native/BrowserContext")),r=e(require("@imdb/gungnir/device/info"));switch(!0){case void 0!==window.NativeWebBridge:console.warn("window.NativeWebBridge already exists");break;case i.default.hasAppContext():window.NativeWebBridge=new t.default(new i.default);break;case r.default.isIMDbApp&&!i.default.hasAppContext():console.warn("window.NativeWebBridge does not have native bridge connection "+r.default.mobilePlatformVersion);break;default:window.NativeWebBridge=new t.default(new a.default)}
},{"..":"o2OF","../native/AppContext":"xlgf","../native/BrowserContext":"jVHQ","@imdb/gungnir/device/info":"ilLD"}]},{},["kIhC"], null)
List of functions to be instrumented: 63
Only instrumenting the following functions from the current script 
[rtiDebugInfo]0 0
