(function __HORCRUX__(){ (window.webpackJsonp=window.webpackJsonp||[]).push([[85],{iRVR:function(e,n,t){"use strict";t.r(n),t.d(n,"ReengagementFeApp",(function(){return X}));var r,o,a,i,s,l,c,u,b,d,m,p,g=t("gcR/"),f=t.n(g),v=t("ERkP"),h=t.n(v),k=t("Ggfp"),y=t("Lcdh"),N=t("fTxn"),w=t("MShG"),E=t("pAnW"),R={PURR_ENVIRONMENT:"prd"===window.vi.env.ENVIRONMENT?"prd":"dev"},T=Object(y.css)("html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block;}body{line-height:1;}ol,ul{list-style:none;}blockquote,q{quotes:none;}blockquote::before,blockquote::after,q::before,q::after{content:'';content:none;}table{border-collapse:collapse;border-spacing:0;}button{border:none;margin:0;padding:0;width:auto;overflow:visible;background:transparent;color:inherit;font:inherit;line-height:normal;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none;&::-moz-focus-inner{border:0;padding:0;}}html{box-sizing:border-box;}*,*::before,*::after{box-sizing:inherit;}"),A=t("lZ/M"),P=t("J4zp"),_=t.n(P),I=t("vftj"),F=t("/Efl"),O=t("4QM3"),L=function(){return h.a.createElement(h.a.Fragment,null,"We were unable to resubscribe you at this moment. Please try again soon, or contact"," ",f()("a",{href:O.CARE_PAGE_LINK,rel:"noopener"},void 0,"Customer Care")," ","for immediate assistance.")},U=function(){return h.a.createElement(h.a.Fragment,null,"We were unable to unsubscribe you at this moment. Please try again soon, or contact"," ",f()("a",{href:O.CARE_PAGE_LINK,rel:"noopener"},void 0,"Customer Care")," ","for immediate assistance.")},C=function(e){var n=e.newsletterList;return h.a.createElement(h.a.Fragment,null,"You have been unsubscribed from ",n,". You can"," ",f()("a",{target:"_blank",href:O.SUBSCRIBE_NEWSLETTERS_PAGE_LINK,rel:"noopener"},void 0,"sign up again")," ","at any time.")},j=function(e){var n=e.newsletterList;return h.a.createElement(h.a.Fragment,null,"You have successfully signed up for ",n,". You can also"," ",r||(r=f()("a",{href:"/seg/settings",target:"_blank",rel:"noopener"},void 0,"sign in"))," ","to manage your preferences, or sign up for additional newsletters"," ",f()("a",{href:O.SUBSCRIBE_NEWSLETTERS_PAGE_LINK,target:"_blank",rel:"noopener"},void 0,"here"),".")},S=function(e){if(1===e.length){var n=_()(e,1)[0];return"".concat(n," newsletter")}if(2===e.length){var t="".concat(e[0]," and ").concat(e[1]);return"".concat(t," newsletters")}var r=e.map((function(n,t){return t===e.length-2?"".concat(e[t]," and ").concat(e[t+1]):t===e.length-1?"":n})).join(", ");return"".concat(r.replace(/(^\s*,)|(,\s*$)/g,"")," newsletters")},B=t("VkAN"),q=t.n(B),x=t("Ck9z"),M=t.n(x).a,V=M(o||(o=q()(["\n  mutation unsubscribeAllNLByToken(\n    $nlUnsubscribeToken: String!\n    $nlUnsubscribeForm: String!\n  ) {\n    unsubscribeAllNewslettersByToken(\n      unsubscribeAllNewslettersByTokenInput: {\n        nlUnsubscribeToken: $nlUnsubscribeToken\n        nlUnsubscribeForm: $nlUnsubscribeForm\n      }\n    ) {\n      success\n      nlProductNames\n    }\n  }\n"]))),$=M(a||(a=q()(["\n  mutation resubscribeAllNLByToken(\n    $nlResubscribeToken: String!\n    $nlResubscribeForm: String!\n  ) {\n    resubscribeAllNewslettersByToken(\n      resubscribeAllNewslettersByTokenInput: {\n        nlResubscribeToken: $nlResubscribeToken\n        nlResubscribeForm: $nlResubscribeForm\n      }\n    ) {\n      success\n      nlProductNames\n    }\n  }\n"]))),z=function(e){var n=e.sendId,t=e.token,r=Object(k.useMutation)(V),o=_()(r,2),a=o[0],c=o[1],u=c.loading,b=c.error,d=c.data;if(Object(v.useEffect)((function(){Object(N.t)({moduleName:"ReengagementUnsubscribePage"});var e=n?"reengagement_campaign_".concat(n):"";a({variables:{nlUnsubscribeToken:t,nlUnsubscribeForm:e}}).catch((function(){}))}),[]),u)return i||(i=f()(N.f,{}));if(b)return f()(w.b,{level:"1",colorVariant:w.P.text.primary},void 0,s||(s=f()(F.a,{copy:U})));var m=(d||{}).unsubscribeAllNewslettersByToken,p=(m=void 0===m?{}:m).nlProductNames,g=S(void 0===p?[]:p),y=f()(w.b,{level:"1",colorVariant:w.P.text.primary},void 0,f()(F.a,{copy:C,params:{newsletterList:g}}));return h.a.createElement(h.a.Fragment,null,l||(l=f()(I.Helmet,{title:"Newsletters"})),f()(w.p,{dataTestId:"reengagement-unsubscribe",title:y}))},G=function(e){var n=e.sendId,t=e.token,r=Object(k.useMutation)($),o=_()(r,2),a=o[0],i=o[1],s=i.loading,l=i.error,d=i.data;if(Object(v.useEffect)((function(){Object(N.t)({moduleName:"ReengagementResubscribePage"});var e=n?"reengagement_resubscribe_".concat(n):"";a({variables:{nlResubscribeToken:t,nlResubscribeForm:e}}).catch((function(){}))}),[]),s)return c||(c=f()(N.f,{}));if(l)return f()(w.b,{level:"1",colorVariant:w.P.text.primary},void 0,u||(u=f()(F.a,{copy:L})));var m=(d||{}).resubscribeAllNewslettersByToken,p=(m=void 0===m?{}:m).nlProductNames,g=S(void 0===p?[]:p),y=f()(w.b,{level:"1",colorVariant:w.P.text.primary},void 0,f()(F.a,{copy:j,params:{newsletterList:g}}));return h.a.createElement(h.a.Fragment,null,b||(b=f()(I.Helmet,{title:"Newsletters"})),f()(w.p,{dataTestId:"reengagement-resubscribe",title:y}))},W=function(){var e,n,t=(e=window.location,{operation:(n=new window.URLSearchParams(e.search)).get("operation")||"",sendId:n.get("send_id")||"",token:n.get("token")||""}),r=t.operation,o=t.sendId,a=t.token;return f()("unsubscribe"===r?z:G,{sendId:o,token:a})};W.displayName="determineOperation";var Y=function(){return f()(N.c,{},void 0,f()(N.b,{purrEnvironment:R.PURR_ENVIRONMENT}),f()(w.s,{headerComponent:d||(d=f()(w.n,{})),footerComponent:m||(m=f()(A.a,{})),messagingUnitComponent:p||(p=f()(N.e,{}))},void 0,W()))};Y.displayName="ReEngagement";var H,J,K=Y,Q=Object(y.css)(T,w.cb,w.db),X=function(){if("undefined"==typeof window)return null;var e=Object(E.a)();return f()(N.a,{purrEnvironment:R.PURR_ENVIRONMENT},void 0,H||(H=f()(y.Global,{styles:Q})),f()(k.ApolloProvider,{client:e},void 0,J||(J=f()(K,{}))))};X.displayName="ReengagementFeApp";n.default=X},pAnW:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var r=t("F5n1"),o=t("hCJd"),a=t("na53"),i=t("e8+o"),s=t("HX+Y"),l=t.n(s),c=t("fTxn"),u=function(){return new r.ApolloClient({link:o.ApolloLink.from([Object(a.createHttpLink)({uri:"".concat(Object(c.l)(),"/svc/optout/query"),fetch:l.a,fetchOptions:{credentials:"include"},headers:{}})]),cache:new i.InMemoryCache})}}}]); })();
//# sourceMappingURL=newslettersreengagement-40006889f0c4e35f9365.js.map